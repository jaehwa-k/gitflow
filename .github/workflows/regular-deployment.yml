name: Regular Deployment
on:
  repository_dispatch:
    types: [regular-deployment]
jobs:
    deploy:
      # 이거 좀 이상한데??? release 브랜치가 있으면 해당 브랜치로 checkout 한 다음에 진행해야지.
        if: ${{ github.ref == 'ref/head/release' }}
        runs-on: ubuntu-latest
        steps:
          - uses: actions/checkout@v3
            with:
              fetch-depth: 0
              ref: main
          - run: |
              git config user.name spendit-deployer
              git config user.email server@spendit.kr
              git merge origin/develop
              git tag v${{ github.event.client_payload.versionName }}
              git push origin main
              git push origin v${{ github.event.client_payload.versionName }}
